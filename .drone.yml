pipeline:
  test:
    image: node:8.16.0-alpine
    commands:
      - yarn install --ignore-optional
      - yarn test
      
  build:
    image: node:8.16.0-alpine
    commands:
      - yarn install --ignore-optional
      - yarn buildProd


  publish:
    image: plugins/docker
    settings:
      registry: registry:5000
      repo: pokemonjs
      auto_tag: true
  # frontend:
  #   image: node:6
  #   commands:
  #     - npm install
  #     - npm test
  # 
  # 
  # notify:
  #   image: plugins/slack
  #   channel: developers
  #   username: drone