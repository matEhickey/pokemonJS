kind: pipeline
    
steps:
  name: test
  image: node:8.16.0-alpine
  commands:
    - yarn install --ignore-optional
    - yarn test
    
  name: build
  image: node:8.16.0-alpine
  commands:
    - yarn install --ignore-optional
    - yarn buildProd
    
  name: publish
  image: plugins/docker
  registry: registry:5000
  repo: pokemonjs
  auto_tag: true
    
  # frontend:
  #   image: node:6
  #   commands:
  #     - npm install
  #     - npm test
  # 
  # 
  # notify:
  #   image: plugins/slack
  #   channel: developers
  #   username: drone